{% extends "base.html" %}
{% set active_page = 'projects' %}

{% block content %}
{% include "_navbar.html" %}
<div class="container">
    <div class="row">
        <div class="col-xs-12">
            <h1>Projects</h1>
            <hr>
            {% if not projects %}
            <p class="lead">No projects could be retrieved using the current API key.</p>
            {% else %}
            <table class="table table-striped">
                <tr>
                    <th>Name</th>
                    <th class="text-center">Receiving Webhooks</th>
                    <th class="text-center">Actions</th>
                </tr>
                {% for project in projects %}
                <tr>
                    <td>{{ project.name }}</td>
                    <td class="text-center">{% if project.webhook == request.url_root %}Yes{% else %}No{% endif %}</td>
                    <td class="text-center">
                        <a href="{{ url_for('projects.setup', short_name=project.short_name) }}"
                           class="btn btn-sm btn-info">Setup
                        </a>
                        <a href="{{ url_for('projects.analyse', short_name=project.short_name) }}"
                           class="btn btn-sm btn-info">Analyse
                        </a>
                        <a href="{{ url_for('projects.download_input', short_name=project.short_name) }}"
                           class="btn btn-sm btn-info">Download Input
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </table>
            {% endif %}
        </div>
    </div>
 </div>
{% endblock %}